<!DOCTYPE html>
<title>Editor component testing</title>

<script type="text/javascript" src="../bower_components/requirejs/require.js"></script>

<script type="text/javascript">
requirejs.config({
  "baseUrl": '..',
  "paths": {
    "angular": "bower_components/angular/angular",
    "es5-shim": "bower_components/es5-shim/es5-shim",
    "lodash": "bower_components/lodash/lodash.min",
    "fioi-editor2": "dist/fioi-editor2"
  },
  "shim": {
    "angular": {"exports": "angular"},
    "fioi-editor2": {deps: ["angular"]}
  }
});
require(['angular', 'es5-shim', 'fioi-editor2'], function (angular) {
  angular.element(document).ready(function () {
    var app = angular.module('main', ['fioi-editor2']);
    app.run(['FioiEditor2Storage', function (storage) {
      storage.addTab('main.c');
      console.log(storage.dump());
    }]);
    app.controller('Main', ['$scope', function ($scope) {
      console.log('Main controller');
      $scope.editorGroupId = 1;
      $scope.onEditorInit = function (api) {
        this.editorApi = api;
        console.log('api', api);
      };
      $scope.testEditorApi = function () {
        this.editorApi.placeholder();
      };
    }]);
    angular.bootstrap(document, ['main'], {strictDi: true});
  });
});
</script>

<style type="text/css">
*[ng-cloak] { display: none !important; }
body { background-color: #eee; }
.fioi-editor2 { background-color: #fff; }
</style>
<link rel="stylesheet" href="../css/style.css">

<div ng-cloak ng-controller="Main">
  <fioi-editor2 group-id="{{::editorGroupId}}" on-init="onEditorInit(api)"></fioi-editor2>
  <button type="button" ng-click="testEditorApi()">test Editor API</button>
</div>
