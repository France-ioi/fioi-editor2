!function e(n,t,a){function r(i,o){if(!t[i]){if(!n[i]){var f="function"==typeof require&&require;if(!o&&f)return f(i,!0);if(s)return s(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var c=t[i]={exports:{}};n[i][0].call(c.exports,function(e){var t=n[i][1][e];return r(t?t:e)},c,c.exports,e,n,t,a)}return t[i].exports}for(var s="function"==typeof require&&require,i=0;i<a.length;i++)r(a[i]);return r}({1:[function(e,n,t){"use strict";function a(e){w=e.sampleRate}function r(e){b.push(e[0]),R.push(e[1])}function s(){for(var e in U){var n=U[e];"url"in n&&URL.revokeObjectURL(n.url)}U={}}function i(){var e=c(b);b=[];var n=c(R);R=[];var t=[e,n],a={numChannels:1,sampleSize:1,sampleRate:w},r=d(t,a),s=URL.createObjectURL(r);return U[s]={wav:r,url:s,channels:t},s}function o(e,n){for(var t=[],a=[],r=0;r<e.length;r+=1){var s=e[r];if(s in U){var i=U[s];t.push(i.channels[0]),a.push(i.channels[1])}}var o=c(t),f=c(a),l=[o,f],u=d(l,n);return{wav:u}}function f(e){var n=e[0],t=e[1];if(n.length!=t.length)throw"cannot average samples of different length";for(var a=n.length,r=new Float32Array(a),s=0,i=0;a>i;)r[s++]=(n[i]+t[i])/2,i++;return r}function l(e){var n=e[0],t=e[1];if(n.length!=t.length)throw"cannot interleave samples of different length";for(var a=n.length,r=new Float32Array(2*a),s=0,i=0;a>i;)r[s++]=n[i],r[s++]=t[i],i++;return r}function c(e){for(var n=0,t=0;t<e.length;t++)n+=e[t].length;var a=new Float32Array(n),r=0;for(t=0;t<e.length;t++)a.set(e[t],r),r+=e[t].length;return a}function u(e,n){self.postMessage({callbackId:e.data.callbackId,result:n})}function h(e,n,t){for(var a=0;a<t.length;a++,n+=2){var r=Math.max(-1,Math.min(1,t[a]));e.setInt16(n,0>r?32768*r:32767*r,!0)}}function p(e,n,t){for(var a=0;a<t.length;a++,n+=1){var r=(Math.max(-1,Math.min(1,t[a]))+1)/2;e.setInt8(n,255*r,!0)}}function g(e,n,t){for(var a=0;a<t.length;a++)e.setUint8(n+a,t.charCodeAt(a))}function m(e){this.coeffs=e,this.nCoeffs=e.length,this.registers=new Float32Array(this.nCoeffs),this.iTopReg=this.nCoeffs-1}function v(e,n,t){for(var a=n.nCoeffs,r=0,s=0;a>s;s++)n.sampleIn(e[r++]);for(var i=0,o=new Float32Array(e.length/t),f=0;r<e.length;)0===f&&(o[i++]=n.sampleOut()),++f==t&&(f=0),n.sampleIn(e[r++]);for(;i<o.length;)o[i++]=n.sampleOut(),n.sampleIn(0);return o}function d(e,n){n||(n=48e3==w?{numChannels:1,sampleSize:2,sampleRate:8e3}:{numChannels:1,sampleSize:1,sampleRate:w});var t=w/n.sampleRate,a=Math.round(t),r=Math.abs(t-a);if(r>1e-6)return"cannot downsample by "+t;switch(a){case 1:break;case 2:e=e.map(function(e){return v(e,new m(I),2)});break;case 3:e=e.map(function(e){return v(e,new m(C),3)});break;case 4:e=e.map(function(e){return v(e,new m(y),4)});break;case 6:e=e.map(function(e){return v(e,new m(k),6)});break;default:return"cannot downsample by "+a}var s=2==n.numChannels?l(e):f(e),i=n.numChannels*n.sampleSize,o=s.length*i,c=new ArrayBuffer(44+o),u=new DataView(c);switch(g(u,0,"RIFF"),u.setUint32(4,c.byteLength-8,!0),g(u,8,"WAVE"),g(u,12,"fmt "),u.setUint32(16,16,!0),u.setUint16(20,1,!0),u.setUint16(22,n.numChannels,!0),u.setUint32(24,n.sampleRate,!0),u.setUint32(28,n.sampleRate*i,!0),u.setUint16(32,i,!0),u.setUint16(34,8*n.sampleSize,!0),g(u,36,"data"),u.setUint32(40,o,!0),n.sampleSize){case 1:p(u,44,s);break;case 2:h(u,44,s)}return new Blob([c],{type:"audio/wav"})}var w,b=[],R=[],U={};self.onmessage=function(e){switch(e.data.command){case"init":a(e.data.config);break;case"record":r(e.data.buffer);break;case"finishRecording":var n=i();u(e,{url:n});break;case"combineRecordings":var t=o(e.data.recordings,e.data.options);u(e,t);break;case"getRecording":var f=U[e.data.recording];u(e,f&&f.wav);break;case"clearRecordings":s(),u(e,{})}},m.prototype.sampleIn=function(e){var n=this.iTopReg;n+=1,n>=this.nCoeffs&&(n=0),this.registers[n]=e,this.iTopReg=n},m.prototype.sampleOut=function(){for(var e=0,n=0,t=this.iTopReg;t>=0;t--)e+=this.coeffs[n++]*this.registers[t];for(t=this.nCoeffs-1;t>this.iTopReg;t--)e+=this.coeffs[n++]*this.registers[t];return e};var k=[-0,-684e-6,-.001238,0,.003098,.004522,-0,-.008736,-.011729,0,.020268,.026356,-0,-.045082,-.060638,0,.133528,.273491,.333333,.273491,.133528,0,-.060638,-.045082,-0,.026356,.020268,0,-.011729,-.008736,-0,.004522,.003098,0,-.001238,-684e-6,-0],y=[0,79e-5,-0,-.002338,0,.005222,-0,-.010087,0,.017899,-0,-.030433,0,.052057,-0,-.098769,0,.3158,.5,.3158,0,-.098769,-0,.052057,0,-.030433,-0,.017899,0,-.010087,-0,.005222,0,-.002338,-0,79e-5,0],C=[-0,-684e-6,.001238,-0,-.003098,.004522,-0,-.008736,.011729,-0,-.020268,.026356,-0,-.045082,.060638,-0,-.133528,.273491,.666667,.273491,-.133528,-0,.060638,-.045082,-0,.026356,-.020268,-0,.011729,-.008736,-0,.004522,-.003098,-0,.001238,-684e-6,-0],I=[.5,.5];self.postMessage("loaded")},{}]},{},[1]);
//# sourceMappingURL=audio-worker.min.js.map
